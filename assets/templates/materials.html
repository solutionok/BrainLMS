<style type="text/css">
	#listTable tr td {
		font-size: 13px;
		padding: 5px;
		white-space: normal;
	}
	#listTable tr th {
		font-size: 15px;
		padding: 8px 5px;
	}
	#listTable .options .btn-circle {
		height: 25px;
		width: 25px;
		padding: 3px;
	}
	#view-list-block {
		padding: 15px 10px;
	}
	#view-list-block .search-input {
		margin-bottom: 12px
	}
	.page-titles h3 {
		font-size: 22px;
		text-align: left;
	}
	.pdf-view {
		position: relative;
    width: 100%;
    padding: 0;
    top: -5px;
    left: 0px;
    z-index: 500;
	}
	.pdf-view img {
		width: 100%;
	}
</style>

<div class="row page-titles" style="margin-bottom: -5px;">
    <div class="col-12 align-self-center">
        <h3 class="text-themecolor m-b-0 m-t-0">Syllabus</h3>
        <!--a href="/portal#" class="btn btn-sm btn-danger" style="position: absolute; right: 15px; top: 3px;">
      		<i class="fa fa-home"></i> Home
      	</a-->
      	<button
      		ng-show="views.list"
      		ng-click="changeView('add')"
      		ng-if="dashboardData.role != 'parent'"
      		class="btn btn-sm btn-success" style="position: absolute; right: 15px; top: 3px;">
      		<i class="fa fa-plus"></i> Add
      	</button>
      	<button
      		ng-show="views.upload_file"
      		ng-click="changeView('list')"
      		class="btn btn-sm btn-danger" style="position: absolute; right: 15px; top: 3px;">
      		<i class="fa fa-arrow-left"></i> Back
      	</button>
    </div>
</div>

<div class="row" ng-show="views.list">
    <div class="col-12" ng-if="!loading">
        <div class="card" style="margin-bottom: 0">
            <div class="card-block" id="view-list-block">
                <div class="card-block-input-group card-block-input-item">
                    <div class="input-group input-group-sm search-input">
                        <input type="text"  name="table_search" ng-model="searchText" placeholder="{{phrase.Search}}" class="form-control input-sm">
                        <span class="input-group-addon"><i class="fa fa-search"></i></span>
                    </div>
                </div>
                <div id="listTable" class="table-responsive">
                    <table class="table table-bordered table-hover">
                        <tbody>
                            <tr>
                                <th>Title</th>
                                <th width="100px" ng-show="$root.can('studyMaterial.Download') || $root.can('studyMaterial.editMaterial') || $root.can('studyMaterial.delMaterial')">Action</th>
                            </tr>
                            <tr ng-repeat="material in materials | filter:searchText">
                                <td>{{material.material_title}}</td>
                                <td class="options" ng-show="$root.can('studyMaterial.Download') || $root.can('studyMaterial.editMaterial') || $root.can('studyMaterial.delMaterial')">
                                    <!-- <a ng-show="$root.can('studyMaterial.Download')" target="_blank" href="{{'index.php/materials/download/'+material.id}}"><button type="button" class="btn btn-warning btn-circle" title="{{phrase.Download}}" ><i class="fa fa-cloud-download"></i></button></a> -->
                                  	<button ng-show="$root.can('studyMaterial.Download')"
                                  		type="button" class="btn btn-success btn-circle" title="View Upload"
                                  		ng-click="showMaterial(material)"
                                  		>
                                  		<i class="fa fa-file"></i>
                                  	</button>
                                    <button ng-show="$root.can('studyMaterial.editMaterial')" ng-click="edit(material.id)" type="button" class="btn btn-warning btn-circle" title="{{phrase.Edit}}" ><i class="fa fa-pencil"></i></button>
                                    <button ng-show="$root.can('studyMaterial.delMaterial')" ng-click="remove(material,$index)" type="button" class="btn btn-danger btn-circle" title="{{phrase.Remove}}" ><i class="fa fa-trash-o"></i></button>
                                </td>
                            </tr>
                            <tr ng-show="materials.length == '0'"><td class="noTableData" colspan="5">{{phrase.noMaterialData}}</td></tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>
    <div class="col-12" ng-if="loading">
    	Loading...
    </div>
</div>

<div class="row" ng-show="views.add">
    <div class="col-12">
        <div class="card">
            <div class="card-block">
                <button ng-click="changeView('list')" class="btn btn-danger btn-flat pull-right card-block-input-item">Cancel</button>
                <h4 class="card-title">{{phrase.addMaterial}}</h4>
                <div class="table-responsive">

                    <form class="form-horizontal" name="addDorm" role="form" ng-upload="saveAdd(content)" role="form" method="post" action="index.php/materials" novalidate>
                        <div class="form-group row" ng-class="{'has-error': addDorm.material_title.$invalid}">
                            <label class="pb-2 pl-3 control-label col-form-label">{{phrase.materialTitle}} * </label>
                            <div class="col-sm-10">
                                <input type="text" name="material_title" ng-model="form.material_title" class="form-control" required placeholder="{{phrase.materialTitle}}">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="pb-2 pl-3 control-label col-form-label">{{phrase.materialDesc}}</label>
                            <div class="col-sm-10">
                                <textarea name="material_description" class="form-control" ng-model="form.material_description" placeholder="{{phrase.materialDesc}}"></textarea>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="pb-2 pl-3 control-label col-form-label">{{phrase.materialFile}}</label>
                            <div class="col-sm-10">
                                <input type="file" name="material_file" id="material_add_file">
                            </div>
                        </div>
                        <div class="form-group row" ng-class="{'has-error': addDorm['class_id[]'].$invalid}">
                            <label class="pb-2 pl-3 control-label col-form-label">{{phrase.class}} *</label>
                            <div class="col-sm-10">
                                <select class="form-control" ng-model="form.class_id" name="class_id[]" ng-change="sectionsList()" multiple required>
                                    <option ng-repeat="class in classes" value="{{class.id}}">{{class.className}}</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group row" ng-class="{'has-error': addDorm['sectionId[]'].$invalid}" ng-show="$root.dashboardData.enableSections == '1'">
                            <label class="pb-2 pl-3 control-label col-form-label">Sections *</label>
                            <div class="col-sm-10">
                                <select class="form-control" ng-model="form.sectionId" name="sectionId[]" multiple ng-required="$root.dashboardData.enableSections == '1'">
                                    <option ng-repeat="section in sections" value="{{section.id}}">{{section.sectionName}}</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group row" ng-class="{'has-error': addDorm.subject_id.$invalid}">
                            <label class="pb-2 pl-3 control-label col-form-label">{{phrase.Subject}} </label>
                            <div class="col-sm-10">
                                <select class="form-control" ng-model="form.subject_id" name="subject_id">
                                    <option ng-repeat="subjectOne in subject" value="{{subjectOne.id}}">{{subjectOne.subjectTitle}}</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group m-b-0">
                            <div class="">
                                <button type="submit" class="btn btn-info waves-effect waves-light" ng-disabled="addDorm.$invalid">{{phrase.addMaterial}}</button>
                            </div>
                        </div>
                    </form>

                </div>
            </div>
        </div>
    </div>
</div>

<div class="row" ng-show="views.edit">
    <div class="col-12">
        <div class="card">
            <div class="card-block">
                <button ng-click="changeView('list')" class="btn btn-danger btn-flat pull-right card-block-input-item">Cancel</button>
                <h4 class="card-title">{{phrase.editMaterial}}</h4>
                <div class="table-responsive">

                    <form class="form-horizontal" name="editMaterial" role="form" ng-upload="saveEdit(content)" role="form" method="post" action="{{'index.php/materials/' + form.id}}" novalidate>
                        <div class="form-group row" ng-class="{'has-error': editMaterial.material_title.$invalid}">
                            <label class="pb-2 pl-3 control-label col-form-label">{{phrase.materialTitle}} * </label>
                            <div class="col-sm-10">
                                <input type="text" name="material_title" ng-model="form.material_title" class="form-control" required placeholder="{{phrase.materialTitle}}">
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="pb-2 pl-3 control-label col-form-label">{{phrase.materialDesc}}</label>
                            <div class="col-sm-10">
                                <textarea name="material_description" class="form-control" ng-model="form.material_description" placeholder="{{phrase.materialDesc}}"></textarea>
                            </div>
                        </div>
                        <div class="form-group row">
                            <label class="pb-2 pl-3 control-label col-form-label">{{phrase.materialFile}}</label>
                            <div class="col-sm-10">
                                <input type="file" name="material_file" id="material_edit_file">
                            </div>
                        </div>
                        <div class="form-group row" ng-class="{'has-error': editMaterial['class_id[]'].$invalid}">
                            <label class="pb-2 pl-3 control-label col-form-label">{{phrase.class}} *</label>
                            <div class="col-sm-10">
                                <select class="form-control" ng-model="form.class_id" name="class_id[]" id="editClassId" multiple required>
                                    <option ng-repeat="class in classes" value="{{class.id}}">{{class.className}}</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group row" ng-class="{'has-error': editMaterial['sectionId[]'].$invalid}" ng-show="$root.dashboardData.enableSections == '1'">
                            <label class="pb-2 pl-3 control-label col-form-label">Sections *</label>
                            <div class="col-sm-10">
                                <select class="form-control" ng-model="form.sectionId" name="sectionId[]" multiple ng-required="$root.dashboardData.enableSections == '1'">
                                    <option ng-repeat="section in form.sections" value="{{section.id}}" ng-selected="isSectionSelected(form.sectionId,section.id)">{{section.sectionName}}</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group row" ng-class="{'has-error': editMaterial.subject_id.$invalid}">
                            <label class="pb-2 pl-3 control-label col-form-label">{{phrase.Subject}} </label>
                            <div class="col-sm-10">
                                <select class="form-control" ng-model="form.subject_id" name="subject_id">
                                    <option ng-repeat="subjectOne in form.subject" value="{{subjectOne.id}}" ng-selected="subjectOne.id == form.subject_id">{{subjectOne.subjectTitle}}</option>
                                </select>
                            </div>
                        </div>
                        <div class="form-group m-b-0">
                            <div class="offset-sm-2 col-sm-10">
                                <button type="submit" class="btn btn-info waves-effect waves-light" ng-disabled="editMaterial.$invalid">{{phrase.editMaterial}}</button>
                            </div>
                        </div>
                    </form>

                </div>
            </div>
        </div>
    </div>
</div>

<div class="row" ng-if="views.upload_file">
	<div class="col-12 pdf-view" style="margin-bottom: -10px" ng-if="current_shown_item.dir_images_count > 0">
		<!-- <div class="csslider1">
			<input ng-repeat="(key, item) in current_shown_item.dir_images_array" name="cs_anchor1" id="cs_slide1_{{key}}" type="radio" class="cs_anchor slide">
			<input name="cs_anchor1" id="cs_play1" type="radio" class="cs_anchor" checked="">
			<input ng-repeat="(key, item) in current_shown_item.dir_images_array" name="cs_anchor1" id="cs_pause1_{{key}}" type="radio" class="cs_anchor slide">

			<ul>
				<li class="cs_skeleton">
					<img src="{{current_shown_item.dir_images_array[0]}}" style="width: 100%;">
				</li>
				<li class="num{{key}} img slide" ng-repeat="(key, item) in current_shown_item.dir_images_array">
					<img src="{{item}}">
				</li>
			</ul>

			<div class="cs_arrowprev">
				<label class="num{{key}}"
					style="border: 1px solid #BBB; background: rgba(255,255,255,.7);"
					for="cs_slide1_{{key}}" ng-repeat="(key, item) in current_shown_item.dir_images_array"><span><i></i><b></b></span></label>
			</div>
			<div class="cs_arrownext">
				<label class="num{{key}}"
					style="border: 1px solid #BBB; background: rgba(255,255,255,.7);"
					for="cs_slide1_{{key}}" ng-repeat="(key, item) in current_shown_item.dir_images_array"><span><i></i><b></b></span></label>
			</div>
		</div> -->
		<img ng-repeat="image_path in current_shown_item.dir_images_array" src="{{image_path}}">
	</div>
	<div class="col-12" ng-if="current_shown_item.dir_images_count == 0">
		No files to display
	</div>
</div>